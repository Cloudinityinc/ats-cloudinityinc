{"ast":null,"code":"import { AuthenticationDetails, CognitoUser } from \"amazon-cognito-identity-js\";\nimport userPool from \"./CognitoConfig\";\nconst authenticateUser = (username, password, newPassword) => {\n  return new Promise((resolve, reject) => {\n    const user = new CognitoUser({\n      Username: username,\n      Pool: UserPool\n    });\n    const authDetails = new AuthenticationDetails({\n      Username: username,\n      Password: password\n    });\n    user.authenticateUser(authDetails, {\n      onSuccess: data => resolve({\n        status: \"success\",\n        data\n      }),\n      onFailure: err => reject(err),\n      newPasswordRequired: (userAttributes, requiredAttributes) => {\n        // Remove non-modifiable attributes\n        delete userAttributes.email_verified; // example attribute\n        delete userAttributes.email; // Remove this if the email attribute is immutable\n\n        if (!newPassword) {\n          resolve({\n            status: \"newPasswordRequired\",\n            user,\n            userAttributes,\n            requiredAttributes\n          });\n        } else {\n          user.completeNewPasswordChallenge(newPassword, userAttributes, {\n            onSuccess: data => resolve({\n              status: \"success\",\n              data\n            }),\n            onFailure: err => reject(err)\n          });\n        }\n      }\n    });\n  });\n};\nexport default authenticateUser;","map":{"version":3,"names":["AuthenticationDetails","CognitoUser","userPool","authenticateUser","username","password","newPassword","Promise","resolve","reject","user","Username","Pool","UserPool","authDetails","Password","onSuccess","data","status","onFailure","err","newPasswordRequired","userAttributes","requiredAttributes","email_verified","email","completeNewPasswordChallenge"],"sources":["/Users/sachin_veera/Desktop/ats-cloudinityinc/src/authenticateUser.js"],"sourcesContent":["import { AuthenticationDetails, CognitoUser } from \"amazon-cognito-identity-js\";\nimport userPool from \"./CognitoConfig\";\n\nconst authenticateUser = (username, password, newPassword) => {\n  return new Promise((resolve, reject) => {\n    const user = new CognitoUser({ Username: username, Pool: UserPool });\n    const authDetails = new AuthenticationDetails({\n      Username: username,\n      Password: password,\n    });\n\n    user.authenticateUser(authDetails, {\n      onSuccess: (data) => resolve({ status: \"success\", data }),\n      onFailure: (err) => reject(err),\n      newPasswordRequired: (userAttributes, requiredAttributes) => {\n        // Remove non-modifiable attributes\n        delete userAttributes.email_verified; // example attribute\n        delete userAttributes.email; // Remove this if the email attribute is immutable\n\n        if (!newPassword) {\n          resolve({\n            status: \"newPasswordRequired\",\n            user,\n            userAttributes,\n            requiredAttributes,\n          });\n        } else {\n          user.completeNewPasswordChallenge(newPassword, userAttributes, {\n            onSuccess: (data) => resolve({ status: \"success\", data }),\n            onFailure: (err) => reject(err),\n          });\n        }\n      },\n    });\n  });\n};\n\nexport default authenticateUser;\n"],"mappings":"AAAA,SAASA,qBAAqB,EAAEC,WAAW,QAAQ,4BAA4B;AAC/E,OAAOC,QAAQ,MAAM,iBAAiB;AAEtC,MAAMC,gBAAgB,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,KAAK;EAC5D,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,IAAI,GAAG,IAAIT,WAAW,CAAC;MAAEU,QAAQ,EAAEP,QAAQ;MAAEQ,IAAI,EAAEC;IAAS,CAAC,CAAC;IACpE,MAAMC,WAAW,GAAG,IAAId,qBAAqB,CAAC;MAC5CW,QAAQ,EAAEP,QAAQ;MAClBW,QAAQ,EAAEV;IACZ,CAAC,CAAC;IAEFK,IAAI,CAACP,gBAAgB,CAACW,WAAW,EAAE;MACjCE,SAAS,EAAGC,IAAI,IAAKT,OAAO,CAAC;QAAEU,MAAM,EAAE,SAAS;QAAED;MAAK,CAAC,CAAC;MACzDE,SAAS,EAAGC,GAAG,IAAKX,MAAM,CAACW,GAAG,CAAC;MAC/BC,mBAAmB,EAAEA,CAACC,cAAc,EAAEC,kBAAkB,KAAK;QAC3D;QACA,OAAOD,cAAc,CAACE,cAAc,CAAC,CAAC;QACtC,OAAOF,cAAc,CAACG,KAAK,CAAC,CAAC;;QAE7B,IAAI,CAACnB,WAAW,EAAE;UAChBE,OAAO,CAAC;YACNU,MAAM,EAAE,qBAAqB;YAC7BR,IAAI;YACJY,cAAc;YACdC;UACF,CAAC,CAAC;QACJ,CAAC,MAAM;UACLb,IAAI,CAACgB,4BAA4B,CAACpB,WAAW,EAAEgB,cAAc,EAAE;YAC7DN,SAAS,EAAGC,IAAI,IAAKT,OAAO,CAAC;cAAEU,MAAM,EAAE,SAAS;cAAED;YAAK,CAAC,CAAC;YACzDE,SAAS,EAAGC,GAAG,IAAKX,MAAM,CAACW,GAAG;UAChC,CAAC,CAAC;QACJ;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAED,eAAejB,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}